@use '../../theme' as theme

.bericht-page
    max-width: 1280px
    margin: 0 auto
    padding: 1rem 1rem 2rem

.page-head
    margin: 0 0 1.5rem

    h1
        margin: 0
        color: theme.$app-primary
        font-size: clamp(1.5rem, 2.4vw, 2.1rem)
        line-height: 1.2

.settings-card
    margin-bottom: 1rem
    border-radius: .9rem
    border: 1px solid rgba(theme.$app-border, .95)

.section-head
    display: flex
    align-items: center
    justify-content: space-between
    padding: 1rem 1rem 0
    margin-bottom: .2rem

    h2
        margin: 0
        color: theme.$app-primary
        font-size: 1.14rem
        letter-spacing: .1px

.bericht-form
    margin-top: .2rem

.bericht-accordion
    display: grid
    gap: .75rem
    margin-bottom: .9rem

.form-section
    border: 1px solid rgba(theme.$app-border, .95)
    border-radius: .75rem
    background: rgba(theme.$app-surface, .92)
    box-shadow: none
    overflow: hidden

    &:hover
        border-color: rgba(theme.$app-primary, .3)

    .mat-expansion-panel-header
        background: rgba(theme.$app-surface-variant, .62)

        &:hover
            background: rgba(theme.$app-surface-variant, .78)

.form-section-title
    color: theme.$app-primary
    font-weight: 600

.form-section-subtitle
    opacity: .72
    font-size: .84rem

.form-section-body
    margin-top: .35rem
    padding-top: .2rem

.grid
    display: grid
    gap: .75rem
    margin-bottom: .75rem

.one-col
    grid-template-columns: 1fr

.two-col
    grid-template-columns: repeat(2, minmax(0, 1fr))
    align-items: start

.three-col
    grid-template-columns: repeat(3, minmax(0, 1fr))

.full-width
    width: 100%

.conditional-block
    border: 1px solid rgba(theme.$app-border, .95)
    border-radius: .7rem
    padding: .8rem
    margin-bottom: .85rem
    background: rgba(theme.$app-surface, .9)

    h3
        margin: 0 0 .65rem
        color: theme.$app-primary
        font-size: 1rem

.selection-description
    margin: -.2rem 0 0
    font-size: .8rem
    opacity: .72

.option-title
    font-weight: 600
    line-height: 1.2

.option-description
    font-size: .78rem
    opacity: .72
    margin-top: .1rem
    white-space: normal

.prefill-row
    display: grid
    grid-template-columns: 1fr auto
    gap: .6rem
    align-items: center

.upload-row
    margin-top: .7rem
    padding: 0

.upload-label
    font-weight: 600
    display: inline-block
    margin-bottom: .35rem
    color: theme.$app-primary

.file-input-hidden
    position: absolute
    width: 1px
    height: 1px
    padding: 0
    margin: -1px
    overflow: hidden
    clip: rect(0, 0, 0, 0)
    border: 0

.upload-button
    display: inline-flex
    align-items: center
    justify-content: center
    border: 1px solid rgba(theme.$app-border, .95)
    border-radius: .45rem
    padding: .38rem .7rem
    margin-left: .5rem
    cursor: pointer
    font-size: .86rem
    background: rgba(theme.$app-surface, .95)

.file-list
    margin: .45rem 0 0
    padding-left: 1rem

.preview-grid
    display: grid
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr))
    gap: .6rem
    margin-top: .6rem

.preview-card
    border: 1px solid rgba(theme.$app-border, .95)
    border-radius: .55rem
    background: rgba(theme.$app-surface, .94)
    overflow: hidden
    box-shadow: 0 3px 12px rgba(theme.$app-primary-dark, .08)

.preview-image
    width: 100%
    height: 120px
    object-fit: cover
    display: block

.preview-file
    height: 120px
    display: flex
    align-items: center
    justify-content: center
    font-weight: 600
    color: theme.$app-primary

.preview-meta
    display: flex
    align-items: center
    justify-content: flex-end
    gap: .2rem
    padding: .45rem
    border-top: 1px solid rgba(theme.$app-border, .72)

    .mat-mdc-icon-button
        width: 32px
        height: 32px
        padding: 4px

    a,
    span
        font-size: .8rem
        overflow: hidden
        text-overflow: ellipsis
        white-space: nowrap

.documentation-block
    border: 0

    .upload-button,
    .preview-card
        border: 0

    .upload-button
        background: rgba(theme.$app-primary, .18)
        color: theme.$app-primary-dark
        font-weight: 600

        &:hover
            background: rgba(theme.$app-primary, .28)

    .preview-card
        box-shadow: none

    .preview-meta
        border-top: 0

.existing-previews
    margin-top: .4rem

.searchable-select
    display: grid
    gap: .45rem

.autocomplete-multi
    display: grid
    gap: .3rem
    align-content: start

.role-chips
    min-height: 2rem
    align-self: start

.table-wrap
    overflow-x: auto
    margin-top: .5rem

    table
        width: 100%

.action-cell
    display: flex
    gap: .5rem

.actions-row
    display: flex
    flex-wrap: wrap
    gap: .6rem
    margin: .25rem 0 .8rem
    justify-content: flex-start

.form-actions
    display: flex
    flex-wrap: wrap
    gap: .6rem
    margin-bottom: .8rem

    button
        min-width: 210px

.top-actions
    display: flex
    gap: .6rem
    flex-wrap: wrap
    margin: .25rem 0 .8rem

    button
        min-width: 190px

.drafts-section
    margin-top: 1.2rem

    h3
        margin: 0 0 .6rem
        color: theme.$app-primary
        font-size: 1rem

    &.list-only
        margin-top: .2rem

.list-title
    display: inline-flex
    align-items: center
    gap: .45rem

    &::before
        content: ''
        width: .5rem
        height: .5rem
        border-radius: 999px
        background: theme.$app-primary

.draft-list
    display: grid
    gap: .5rem

.draft-item
    border: 1px solid rgba(theme.$app-border, .95)
    border-radius: .5rem
    padding: .6rem
    display: flex
    justify-content: space-between
    gap: .8rem
    align-items: center
    background: rgba(theme.$app-surface, .92)
    transition: border-color .15s ease, box-shadow .15s ease

    &:hover
        border-color: rgba(theme.$app-primary, .3)
        box-shadow: 0 6px 18px rgba(theme.$app-primary-dark, .11)

.draft-main
    display: grid
    gap: .2rem

    strong
        color: theme.$app-primary

    span
        opacity: .85

    small
        opacity: .65

.draft-actions
    display: flex
    gap: .45rem
    flex-wrap: wrap
    align-items: center

.status-badge
    border-radius: 999px
    padding: .15rem .55rem
    background: rgba(theme.$app-warning, .22)
    color: theme.$app-primary-deep
    font-weight: 600
    font-size: .78rem

    &.done
        background: rgba(theme.$app-success, .16)
        color: theme.$app-success

.empty
    opacity: .75

@media (max-width: 992px)
    .two-col,
    .three-col,
    .prefill-row
        grid-template-columns: 1fr

@media (max-width: 768px)
    .bericht-page
        padding: .75rem .75rem 1.5rem

    .page-head
        margin-bottom: 1rem

        h1
            font-size: 1.4rem

    .section-head
        padding: .85rem .85rem 0

        h2
            font-size: 1rem

    .form-section
        border-radius: .6rem

    .form-section-subtitle
        display: none

    .actions-row
        button
            width: 100%

    .form-actions,
    .top-actions
        button
            width: 100%
            min-width: 0

    .upload-row
        padding: .55rem .55rem .5rem

    .draft-item
        flex-direction: column
        align-items: flex-start

    .draft-actions
        width: 100%

        button
            width: 100%

    .action-cell
        flex-wrap: wrap